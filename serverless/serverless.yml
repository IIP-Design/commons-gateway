service: commons-gateway

frameworkVersion: '3'

provider:
  name: aws
  runtime: go1.x
  stage: dev

package:
  patterns:
    - '!./**'
    - ./bin/**

functions:
  admin-new:
    name: gateway-create-admin
    handler: bin/admin-new
    description: Add an new email to the list of admin users.
    events:
      - httpApi:
          path: /admin-new
          method: post
  guest-auth:
    name: gateway-guest-auth
    handler: bin/guest-auth
    description: Authenticate a guest user.
    events:
      - httpApi:
          path: /guest-auth
          method: post
  get-creds:
    name: gateway-retrieve-creds
    handler: bin/get-creds
    description: Retrieve a users password hash and salt.
    events:
      - httpApi:
          path: /get-creds
          method: post
  provision:
    name: gateway-provision-creds
    handler: bin/provision
    description: Records a guest user invitation and generates credentials for this user.
    events:
      - httpApi:
          path: /provision
          method: post
